{"ast":null,"code":"import{motion,useAnimation,useMotionValue,useTransform}from'motion/react';import{useEffect,useRef,useState}from'react';import{debounce}from'../utils/resizeObserverUtils';import'./RollingGallery.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RollingGallery=_ref=>{let{autoplay=false,pauseOnHover=false,images=[]}=_ref;const[isScreenSizeSm,setIsScreenSizeSm]=useState(window.innerWidth<=640);// Optimized cylinder parameters for perfect spacing with smaller cards\nconst cylinderWidth=isScreenSizeSm?2000:2800;// Reduced for smaller cards\nconst faceCount=images.length;const faceWidth=isScreenSizeSm?200:250;// Reduced width for smaller cards\nconst dragFactor=0.02;// Reduced drag sensitivity for smoother control\nconst radius=cylinderWidth/(2*Math.PI);const angleStep=360/faceCount;// Consistent angle between each card\nconst rotation=useMotionValue(0);const controls=useAnimation();const autoplayRef=useRef();const isPaused=useRef(false);const handleDrag=(_,info)=>{if(!isPaused.current){rotation.set(rotation.get()+info.offset.x*dragFactor);}};const handleDragEnd=(_,info)=>{if(!isPaused.current){controls.start({rotateY:rotation.get()+info.velocity.x*dragFactor,transition:{type:'spring',stiffness:60,damping:20,mass:0.1,ease:'easeOut'}});}};const transform=useTransform(rotation,value=>{return\"rotate3d(0, 1, 0, \".concat(value,\"deg)\");});// Continuous smooth scrolling with consistent speed\nuseEffect(()=>{if(autoplay&&!isPaused.current){const startContinuousScroll=()=>{autoplayRef.current=setInterval(()=>{if(!isPaused.current){const currentRotation=rotation.get();const newRotation=currentRotation-0.15;// Consistent, smooth movement\ncontrols.start({rotateY:newRotation,transition:{duration:0.05,ease:'linear'}});rotation.set(newRotation);}},16);// 60fps smooth animation\n};startContinuousScroll();return()=>clearInterval(autoplayRef.current);}},[autoplay,rotation,controls]);useEffect(()=>{const handleResize=debounce(()=>{setIsScreenSizeSm(window.innerWidth<=640);},150);// Debounce resize events by 150ms\nwindow.addEventListener('resize',handleResize);return()=>{window.removeEventListener('resize',handleResize);};},[]);const handleMouseEnter=()=>{if(autoplay&&pauseOnHover){isPaused.current=true;clearInterval(autoplayRef.current);controls.stop();}};const handleMouseLeave=()=>{if(autoplay&&pauseOnHover){isPaused.current=false;// Restart continuous scrolling with consistent speed\nconst startContinuousScroll=()=>{autoplayRef.current=setInterval(()=>{if(!isPaused.current){const currentRotation=rotation.get();const newRotation=currentRotation-0.15;// Same speed as initial scroll\ncontrols.start({rotateY:newRotation,transition:{duration:0.05,ease:'linear'}});rotation.set(newRotation);}},16);};startContinuousScroll();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"gallery-gradient gallery-gradient-left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery-gradient gallery-gradient-right\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery-content\",children:/*#__PURE__*/_jsx(motion.div,{drag:\"x\",className:\"gallery-track\",onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,style:{transform:transform,rotateY:rotation,width:cylinderWidth,transformStyle:'preserve-3d'},onDrag:handleDrag,onDragEnd:handleDragEnd,animate:controls,children:images.map((url,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"gallery-item\",style:{width:\"\".concat(faceWidth,\"px\"),transform:\"rotateY(\".concat(i*angleStep,\"deg) translateZ(\").concat(radius,\"px)\")},children:/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"gallery\",className:\"gallery-img\"})},i))})})]});};export default RollingGallery;","map":{"version":3,"names":["motion","useAnimation","useMotionValue","useTransform","useEffect","useRef","useState","debounce","jsx","_jsx","jsxs","_jsxs","RollingGallery","_ref","autoplay","pauseOnHover","images","isScreenSizeSm","setIsScreenSizeSm","window","innerWidth","cylinderWidth","faceCount","length","faceWidth","dragFactor","radius","Math","PI","angleStep","rotation","controls","autoplayRef","isPaused","handleDrag","_","info","current","set","get","offset","x","handleDragEnd","start","rotateY","velocity","transition","type","stiffness","damping","mass","ease","transform","value","concat","startContinuousScroll","setInterval","currentRotation","newRotation","duration","clearInterval","handleResize","addEventListener","removeEventListener","handleMouseEnter","stop","handleMouseLeave","className","children","div","drag","onMouseEnter","onMouseLeave","style","width","transformStyle","onDrag","onDragEnd","animate","map","url","i","src","alt"],"sources":["/Users/devulapellykushalkumarreddy/Downloads/CHALYATI/car-rental-frontend/src/components/RollingGallery.jsx"],"sourcesContent":["import { motion, useAnimation, useMotionValue, useTransform } from 'motion/react';\nimport { useEffect, useRef, useState } from 'react';\nimport { debounce } from '../utils/resizeObserverUtils';\nimport './RollingGallery.css';\n\nconst RollingGallery = ({ autoplay = false, pauseOnHover = false, images = [] }) => {\n  const [isScreenSizeSm, setIsScreenSizeSm] = useState(window.innerWidth <= 640);\n\n  // Optimized cylinder parameters for perfect spacing with smaller cards\n  const cylinderWidth = isScreenSizeSm ? 2000 : 2800; // Reduced for smaller cards\n  const faceCount = images.length;\n  const faceWidth = isScreenSizeSm ? 200 : 250; // Reduced width for smaller cards\n  const dragFactor = 0.02; // Reduced drag sensitivity for smoother control\n  const radius = cylinderWidth / (2 * Math.PI);\n  const angleStep = 360 / faceCount; // Consistent angle between each card\n\n  const rotation = useMotionValue(0);\n  const controls = useAnimation();\n  const autoplayRef = useRef();\n  const isPaused = useRef(false);\n\n  const handleDrag = (_, info) => {\n    if (!isPaused.current) {\n      rotation.set(rotation.get() + info.offset.x * dragFactor);\n    }\n  };\n\n  const handleDragEnd = (_, info) => {\n    if (!isPaused.current) {\n      controls.start({\n        rotateY: rotation.get() + info.velocity.x * dragFactor,\n        transition: { type: 'spring', stiffness: 60, damping: 20, mass: 0.1, ease: 'easeOut' }\n      });\n    }\n  };\n\n  const transform = useTransform(rotation, value => {\n    return `rotate3d(0, 1, 0, ${value}deg)`;\n  });\n\n  // Continuous smooth scrolling with consistent speed\n  useEffect(() => {\n    if (autoplay && !isPaused.current) {\n      const startContinuousScroll = () => {\n        autoplayRef.current = setInterval(() => {\n          if (!isPaused.current) {\n            const currentRotation = rotation.get();\n            const newRotation = currentRotation - 0.15; // Consistent, smooth movement\n            \n            controls.start({\n              rotateY: newRotation,\n              transition: { duration: 0.05, ease: 'linear' }\n            });\n            rotation.set(newRotation);\n          }\n        }, 16); // 60fps smooth animation\n      };\n\n      startContinuousScroll();\n      return () => clearInterval(autoplayRef.current);\n    }\n  }, [autoplay, rotation, controls]);\n\n  useEffect(() => {\n    const handleResize = debounce(() => {\n      setIsScreenSizeSm(window.innerWidth <= 640);\n    }, 150); // Debounce resize events by 150ms\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  const handleMouseEnter = () => {\n    if (autoplay && pauseOnHover) {\n      isPaused.current = true;\n      clearInterval(autoplayRef.current);\n      controls.stop();\n    }\n  };\n\n  const handleMouseLeave = () => {\n    if (autoplay && pauseOnHover) {\n      isPaused.current = false;\n      // Restart continuous scrolling with consistent speed\n      const startContinuousScroll = () => {\n        autoplayRef.current = setInterval(() => {\n          if (!isPaused.current) {\n            const currentRotation = rotation.get();\n            const newRotation = currentRotation - 0.15; // Same speed as initial scroll\n            \n            controls.start({\n              rotateY: newRotation,\n              transition: { duration: 0.05, ease: 'linear' }\n            });\n            rotation.set(newRotation);\n          }\n        }, 16);\n      };\n      startContinuousScroll();\n    }\n  };\n\n  return (\n    <div className=\"gallery-container\">\n      <div className=\"gallery-gradient gallery-gradient-left\"></div>\n      <div className=\"gallery-gradient gallery-gradient-right\"></div>\n      <div className=\"gallery-content\">\n        <motion.div\n          drag=\"x\"\n          className=\"gallery-track\"\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n          style={{\n            transform: transform,\n            rotateY: rotation,\n            width: cylinderWidth,\n            transformStyle: 'preserve-3d'\n          }}\n          onDrag={handleDrag}\n          onDragEnd={handleDragEnd}\n          animate={controls}\n        >\n          {images.map((url, i) => (\n            <div\n              key={i}\n              className=\"gallery-item\"\n              style={{\n                width: `${faceWidth}px`,\n                transform: `rotateY(${i * angleStep}deg) translateZ(${radius}px)`\n              }}\n            >\n              <img src={url} alt=\"gallery\" className=\"gallery-img\" />\n            </div>\n          ))}\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default RollingGallery;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}